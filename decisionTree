import numpy as np
import matplotlib.pyplot as plt
from sklearn.tree import DecisionTreeClassifier, plot_tree
from sklearn.datasets import make_classification
import os

X, y = make_classification(
    n_samples=400,
    n_features=5,
    n_informative=3,
    n_redundant=0,
    n_classes=3,
    random_state=42
)

tree = DecisionTreeClassifier(
    max_depth=6,
    min_samples_split=10,
    min_samples_leaf=5,
    max_features='sqrt',
    criterion='gini',
    random_state=42
)

tree.fit(X, y)

plt.figure(figsize=(14, 8))
plot_tree(tree, filled=True, feature_names=[f'f{i}' for i in range(X.shape[1])])
path = '/tmp/decision_tree_structure.png'
plt.savefig(path, dpi=150, bbox_inches='tight')
os.system(f'xdg-open {path}')

plt.figure(figsize=(6, 4))
plt.bar(range(X.shape[1]), tree.feature_importances_)
plt.xlabel('Feature Index')
plt.ylabel('Importance')
plt.title('Decision Tree â€” Feature Importances')

path2 = '/tmp/tvtoDecisionTreeImportances.png'
plt.savefig(path2, dpi=150, bbox_inches='tight')
os.system(f'xdg-open {path2}')
